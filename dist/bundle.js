!function(t){function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var e={};n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=13)}([function(t,n,e){"use strict";function r(t,n){return t<n?-1:t===n?0:1}function i(t,n){return t===n}function o(t){return null===t?"COLLECTION_NULL":a(t)?"COLLECTION_UNDEFINED":c(t)?"$s"+t:"$o"+t.toString()}function s(t,e){if(void 0===e&&(e=","),null===t)return"COLLECTION_NULL";if(a(t))return"COLLECTION_UNDEFINED";if(c(t))return t.toString();var r="{",i=!0;for(var o in t)n.has(t,o)&&(i?i=!1:r+=e,r=r+o+":"+t[o]);return r+"}"}function u(t){return"function"==typeof t}function a(t){return void 0===t}function c(t){return"[object String]"===Object.prototype.toString.call(t)}function f(t){return a(t)||!u(t)?function(t,n){return t<n?1:t===n?0:-1}:function(n,e){return-1*t(n,e)}}function l(t){return function(n,e){return 0===t(n,e)}}Object.defineProperty(n,"__esModule",{value:!0});var h=Object.prototype.hasOwnProperty;n.has=function(t,n){return h.call(t,n)},n.defaultCompare=r,n.defaultEquals=i,n.defaultToString=o,n.makeString=s,n.isFunction=u,n.isUndefined=a,n.isString=c,n.reverseCompareFunction=f,n.compareToEquals=l},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(0),i=function(){function t(t){this.table={},this.nElements=0,this.toStr=t||r.defaultToString}return t.prototype.getValue=function(t){var n=this.table["$"+this.toStr(t)];if(!r.isUndefined(n))return n.value},t.prototype.setValue=function(t,n){if(!r.isUndefined(t)&&!r.isUndefined(n)){var e,i="$"+this.toStr(t),o=this.table[i];return r.isUndefined(o)?(this.nElements++,e=void 0):e=o.value,this.table[i]={key:t,value:n},e}},t.prototype.remove=function(t){var n="$"+this.toStr(t),e=this.table[n];if(!r.isUndefined(e))return delete this.table[n],this.nElements--,e.value},t.prototype.keys=function(){var t=[];for(var n in this.table)if(r.has(this.table,n)){var e=this.table[n];t.push(e.key)}return t},t.prototype.values=function(){var t=[];for(var n in this.table)if(r.has(this.table,n)){var e=this.table[n];t.push(e.value)}return t},t.prototype.forEach=function(t){for(var n in this.table)if(r.has(this.table,n)){var e=this.table[n],i=t(e.key,e.value);if(!1===i)return}},t.prototype.containsKey=function(t){return!r.isUndefined(this.getValue(t))},t.prototype.clear=function(){this.table={},this.nElements=0},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return this.nElements<=0},t.prototype.toString=function(){var t="{";return this.forEach(function(n,e){t+="\n\t"+n+" : "+e}),t+"\n}"},t}();n.default=i},function(t,n,e){"use strict";function r(t,n,e){for(var r=e||p.defaultEquals,i=t.length,o=0;o<i;o++)if(r(t[o],n))return o;return-1}function i(t,n,e){for(var r=e||p.defaultEquals,i=t.length,o=i-1;o>=0;o--)if(r(t[o],n))return o;return-1}function o(t,n,e){return r(t,n,e)>=0}function s(t,n,e){var i=r(t,n,e);return!(i<0)&&(t.splice(i,1),!0)}function u(t,n,e){for(var r=e||p.defaultEquals,i=t.length,o=0,s=0;s<i;s++)r(t[s],n)&&o++;return o}function a(t,n,e){var r=e||p.defaultEquals;if(t.length!==n.length)return!1;for(var i=t.length,o=0;o<i;o++)if(!r(t[o],n[o]))return!1;return!0}function c(t){return t.concat()}function f(t,n,e){if(n<0||n>=t.length||e<0||e>=t.length)return!1;var r=t[n];return t[n]=t[e],t[e]=r,!0}function l(t){return"["+t.toString()+"]"}function h(t,n){for(var e=0,r=t;e<r.length;e++){if(!1===n(r[e]))return}}Object.defineProperty(n,"__esModule",{value:!0});var p=e(0);n.indexOf=r,n.lastIndexOf=i,n.contains=o,n.remove=s,n.frequency=u,n.equals=a,n.copy=c,n.swap=f,n.toString=l,n.forEach=h},function(t,n,e){"use strict";function r(t){return t instanceof N?t.deps:[]}function i(t){return t instanceof N?t.f:t}function o(t){return t instanceof T?t.deps:[]}function s(t){return t instanceof T?t.f:t}function u(t){return t instanceof S?t.deps:[]}function a(t){return t instanceof S?t.f:t}function c(t){return t instanceof A?t.deps:[]}function f(t){return t instanceof A?t.f:t}function l(t){return t instanceof C?t.deps:[]}function h(t){return t instanceof C?t.f:t}function p(t){return t instanceof O?t.deps:[]}function d(t){return t instanceof O?t.f:t}function y(t){for(var n=[],e=0;e<t.length;e++){var r=t[e];n.push(new w(r.getVertex__(),null))}return n}function v(t,n){function e(){this.constructor=t}k(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}e.d(n,"e",function(){return W}),e.d(n,"a",function(){return U}),e.d(n,"b",function(){return $}),e.d(n,"f",function(){return R}),e.d(n,"c",function(){return D}),e.d(n,"d",function(){return Z});var m,_=e(15),g=(e.n(_),e(23)),x=(e.n(g),0),w=function(){function t(t,n){if(this.registered=!1,this.deregister_=null,null===t)throw new Error("null origin!");this.origin=t,this.register_=n}return t.prototype.register=function(t){var n=this;this.registered||(this.registered=!0,null!==this.register_?this.deregister_=this.register_():(this.origin.increment(t),this.deregister_=function(){return n.origin.decrement(t)}))},t.prototype.deregister=function(t){this.registered&&(this.registered=!1,null!==this.deregister_&&this.deregister_())},t}();!function(t){t[t.black=0]="black",t[t.gray=1]="gray",t[t.white=2]="white",t[t.purple=3]="purple"}(m||(m={}));var b=[],E=0,I=function(){function t(t,n,e){this.targets=[],this.childrn=[],this.visited=!1,this.color=m.black,this.buffered=!1,this.refCountAdj=0,this.name=t,this.rank=n,this.sources=e,this.id=E++}return t.prototype.refCount=function(){return this.targets.length},t.prototype.register=function(t){return this.increment(t)},t.prototype.deregister=function(n){this.decrement(n),t.collectCycles()},t.prototype.incRefCount=function(t){var n=!1;if(0==this.refCount())for(var e=0;e<this.sources.length;e++)this.sources[e].register(this);return this.targets.push(t),t.childrn.push(this),t.ensureBiggerThan(this.rank)&&(n=!0),x++,n},t.prototype.decRefCount=function(t){for(var n=!1,e=t.childrn.length-1;e>=0;e--)t.childrn[e]===this&&t.childrn.splice(e,1);for(var e=0;e<this.targets.length;e++)if(this.targets[e]===t){this.targets.splice(e,1),n=!0;break}if(n){if(0==this.refCount())for(var e=0;e<this.sources.length;e++)this.sources[e].deregister(this);x--}},t.prototype.addSource=function(t){this.sources.push(t),this.refCount()>0&&t.register(this)},t.prototype.ensureBiggerThan=function(t){if(this.rank>t||this.visited)return!1;this.visited=!0,this.rank=t+1;for(var n=0;n<this.targets.length;n++)this.targets[n].ensureBiggerThan(this.rank);return this.visited=!1,!0},t.prototype.descr=function(){var t=null;switch(this.color){case m.black:t="black";break;case m.gray:t="gray";break;case m.white:t="white";break;case m.purple:t="purple"}for(var n=this.id+" "+this.name+" ["+this.refCount()+"/"+this.refCountAdj+"] "+t+" ->",e=this.children(),r=0;r<e.length;r++)n=n+" "+e[r].id;return n},t.prototype.children=function(){return this.childrn},t.prototype.increment=function(t){return this.incRefCount(t)},t.prototype.decrement=function(t){this.decRefCount(t),0==this.refCount()?this.release():this.possibleRoots()},t.prototype.release=function(){this.color=m.black,this.buffered||this.free()},t.prototype.free=function(){for(;this.targets.length>0;)this.decRefCount(this.targets[0])},t.prototype.possibleRoots=function(){this.color!=m.purple&&(this.color=m.purple,this.buffered||(this.buffered=!0,b.push(this)))},t.collectCycles=function(){if(!t.collectingCycles)try{t.collectingCycles=!0,t.markRoots(),t.scanRoots(),t.collectRoots()}finally{t.collectingCycles=!1}},t.markRoots=function(){for(var t=[],n=0;n<b.length;n++)b[n].color==m.purple?(b[n].markGray(),t.push(b[n])):(b[n].buffered=!1,b[n].color==m.black&&0==b[n].refCount()&&b[n].free());b=t},t.scanRoots=function(){for(var t=0;t<b.length;t++)b[t].scan()},t.collectRoots=function(){for(var t=0;t<b.length;t++)b[t].buffered=!1,b[t].collectWhite();b=[]},t.prototype.markGray=function(){if(this.color!=m.gray){this.color=m.gray;for(var t=this.children(),n=0;n<t.length;n++)t[n].refCountAdj--,t[n].markGray()}},t.prototype.scan=function(){if(this.color==m.gray)if(this.refCount()+this.refCountAdj>0)this.scanBlack();else{this.color=m.white;for(var t=this.children(),n=0;n<t.length;n++)t[n].scan()}},t.prototype.scanBlack=function(){this.color=m.black;for(var t=this.children(),n=0;n<t.length;n++)t[n].refCountAdj++,t[n].color!=m.black&&t[n].scanBlack()},t.prototype.collectWhite=function(){if(this.color==m.white&&!this.buffered){this.color=m.black,this.refCountAdj=0;for(var t=this.children(),n=0;n<t.length;n++)t[n].collectWhite();this.free()}},t.NULL=new t("user",1e12,[]),t.collectingCycles=!1,t}(),N=function(){function t(t,n){this.f=t,this.deps=n}return t}(),T=function(){function t(t,n){this.f=t,this.deps=n}return t}(),S=function(){function t(t,n){this.f=t,this.deps=n}return t}(),A=function(){function t(t,n){this.f=t,this.deps=n}return t}(),C=function(){function t(t,n){this.f=t,this.deps=n}return t}(),O=function(){function t(t,n){this.f=t,this.deps=n}return t}(),k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])},V=function(){function t(n,e){this.rank=n,this.action=e,this.seq=t.nextSeq++}return t.prototype.toString=function(){return this.seq.toString()},t.nextSeq=0,t}(),R=function(){function t(){this.inCallback=0,this.toRegen=!1,this.prioritizedQ=new _.PriorityQueue(function(t,n){return t.rank.rank<n.rank.rank?1:t.rank.rank>n.rank.rank?-1:t.seq<n.seq?1:t.seq>n.seq?-1:0}),this.entries=new _.Set(function(t){return t.toString()}),this.sampleQ=[],this.lastQ=[],this.postQ=null}return t.prototype.requestRegen=function(){this.toRegen=!0},t.prototype.prioritized=function(t,n){var e=new V(t,n);this.prioritizedQ.enqueue(e),this.entries.add(e)},t.prototype.sample=function(t){this.sampleQ.push(t)},t.prototype.last=function(t){this.lastQ.push(t)},t.prototype.post=function(t,n){for(null==this.postQ&&(this.postQ=[]);this.postQ.length<=t;)this.postQ.push(null);var e=this.postQ[t],r=null===e?n:function(){e(),n()};this.postQ[t]=r},t.prototype.checkRegen=function(){if(this.toRegen){this.toRegen=!1,this.prioritizedQ.clear();for(var t=this.entries.toArray(),n=0;n<t.length;n++)this.prioritizedQ.enqueue(t[n])}},t.prototype.isActive=function(){return!!t.currentTransaction},t.prototype.close=function(){for(;;){for(;;){if(this.checkRegen(),this.prioritizedQ.isEmpty())break;var n=this.prioritizedQ.dequeue();this.entries.remove(n),n.action()}var e=this.sampleQ;this.sampleQ=[];for(var r=0;r<e.length;r++)e[r]();if(this.prioritizedQ.isEmpty()&&this.sampleQ.length<1)break}for(var r=0;r<this.lastQ.length;r++)this.lastQ[r]();if(this.lastQ=[],null!=this.postQ){for(var r=0;r<this.postQ.length;r++)if(null!=this.postQ[r]){var i=t.currentTransaction;try{if(r>0){t.currentTransaction=new t;try{this.postQ[r](),t.currentTransaction.close()}catch(n){throw t.currentTransaction.close(),n}}else t.currentTransaction=null,this.postQ[r]();t.currentTransaction=i}catch(n){throw t.currentTransaction=i,n}}this.postQ=null}},t.onStart=function(n){t.onStartHooks.push(n)},t.run=function(n){var e=t.currentTransaction;if(null===e){if(!t.runningOnStartHooks){t.runningOnStartHooks=!0;try{for(var r=0;r<t.onStartHooks.length;r++)t.onStartHooks[r]()}finally{t.runningOnStartHooks=!1}}t.currentTransaction=new t}try{var i=n();return null===e&&(t.currentTransaction.close(),t.currentTransaction=null),i}catch(n){throw null===e&&(t.currentTransaction.close(),t.currentTransaction=null),n}},t.currentTransaction=null,t.onStartHooks=[],t.runningOnStartHooks=!1,t}(),q=function(){function t(t,n){this.f=s(t),this.out=n,this.out.getVertex__().sources=this.out.getVertex__().sources.concat(y(o(t))),this.accumValid=!1}return t.prototype.send_=function(t){var n=this;this.accumValid?this.accum=this.f(this.accum,t):(R.currentTransaction.prioritized(this.out.getVertex__(),function(){n.out.send_(n.accum),n.accumValid=!1,n.accum=null}),this.accum=t,this.accumValid=!0)},t}(),j=function(){function t(t){this.f=t}return t.prototype.get=function(){return this.f()},t.prototype.map=function(n){var e=this;return new t(function(){return n(e.f())})},t.prototype.lift=function(n,e){var r=this;return new t(function(){return e(r.f(),n.f())})},t.prototype.lift3=function(n,e,r){var i=this;return new t(function(){return r(i.f(),n.f(),e.f())})},t.prototype.lift4=function(n,e,r,i){var o=this;return new t(function(){return i(o.f(),n.f(),e.f(),r.f())})},t}(),z=function(){function t(){}return t.UNIT=new t,t}(),D=function(){function t(){}return t.updates=function(t){return t.getStream__()},t.value=function(n){return R.run(function(){var e=new B;R.currentTransaction.prioritized(e.getVertex__(),function(){e.send_(z.UNIT)});var r=e.snapshot1(n);return t.updates(n).orElse(r)})},t.defer=function(n){return t.split(n.map(function(t){return[t]}))},t.split=function(t){var n=new B(null);return n.setVertex__(new I("split",0,[new w(t.getVertex__(),function(){return t.listen_(n.getVertex__(),function(t){for(var e=0;e<t.length;e++)!function(e){R.currentTransaction.post(e,function(){R.run(function(){n.send_(t[e])})})}(e)},!1)})])),n},t}(),P=function(){function t(t){this.hasValue=!1,this.value=null,this.cell=t}return t}(),L=function(){function t(){this.f=null,this.f_present=!1,this.a=null,this.a_present=!1}return t}(),U=function(){function t(t,n){var e=this;this.value=t,n?R.run(function(){return e.setStream(n)}):(this.str=new Q,this.vertex=new I("ConstCell",0,[]))}return t.prototype.setStream=function(t){var n=this;this.str=t;var e=this,r=new w(t.getVertex__(),function(){return t.listen_(e.vertex,function(t){null==e.valueUpdate&&R.currentTransaction.last(function(){e.value=e.valueUpdate,e.lazyInitValue=null,e.valueUpdate=null}),e.valueUpdate=t},!1)});this.vertex=new I("Cell",0,[r]),this.vertex.register(I.NULL),R.currentTransaction.last(function(){n.vertex.deregister(I.NULL)})},t.prototype.getVertex__=function(){return this.vertex},t.prototype.getStream__=function(){return this.str},t.prototype.sample=function(){var t=this;return R.run(function(){return t.sampleNoTrans__()})},t.prototype.sampleNoTrans__=function(){return this.value},t.prototype.sampleLazy=function(){var t=this;return R.run(function(){return t.sampleLazyNoTrans__()})},t.prototype.sampleLazyNoTrans__=function(){var t=this,n=new P(t);return R.currentTransaction.sample(function(){n.value=null!=t.valueUpdate?t.valueUpdate:t.sampleNoTrans__(),n.hasValue=!0,n.cell=null}),new j(function(){return n.hasValue?n.value:n.cell.sample()})},t.prototype.map=function(t){var n=this;return R.run(function(){return D.updates(n).map(t).holdLazy(n.sampleLazy().map(i(t)))})},t.prototype.lift=function(n,e){var r=s(e),i=this.map(function(t){return function(n){return r(t,n)}});return t.apply(i,n,y(o(e)))},t.prototype.lift3=function(n,e,r){var i=a(r),o=function(t){return function(n){return function(e){return i(t,n,e)}}},s=this.map(o);return t.apply(t.apply(s,n),e,y(u(r)))},t.prototype.lift4=function(n,e,r,i){var o=f(i),s=function(t){return function(n){return function(e){return function(r){return o(t,n,e,r)}}}},u=this.map(s);return t.apply(t.apply(t.apply(u,n),e),r,y(c(i)))},t.prototype.lift5=function(n,e,r,i,o){var s=h(o),u=function(t){return function(n){return function(e){return function(r){return function(i){return s(t,n,e,r,i)}}}}},a=this.map(u);return t.apply(t.apply(t.apply(t.apply(a,n),e),r),i,y(l(o)))},t.prototype.lift6=function(n,e,r,i,o,s){var u=d(s),a=function(t){return function(n){return function(e){return function(r){return function(i){return function(o){return u(t,n,e,r,i,o)}}}}}},c=this.map(a);return t.apply(t.apply(t.apply(t.apply(t.apply(c,n),e),r),i),o,y(p(s)))},t.apply=function(t,n,e){return R.run(function(){var r=new L,i=new B,o=D.value(t),s=D.value(n),u=new w(o.getVertex__(),function(){return o.listen_(i.getVertex__(),function(t){r.f=t,r.f_present=!0,r.a_present&&i.send_(r.f(r.a))},!1)}),a=new w(s.getVertex__(),function(){return s.listen_(i.getVertex__(),function(t){r.a=t,r.a_present=!0,r.f_present&&i.send_(r.f(r.a))},!1)});return i.setVertex__(new I("apply",0,[u,a].concat(e||[]))),i.coalesce__(function(t,n){return n}).holdLazy(new j(function(){return t.sampleNoTrans__()(n.sampleNoTrans__())}))})},t.switchC=function(t){return R.run(function(){var n=t.sampleLazy().map(function(t){return t.sample()}),e=new B,r=null,i=D.value(t),o=new w(i.getVertex__(),function(){var t=null===r?null:D.value(r).listen_(e.getVertex__(),function(t){return e.send_(t)},!1),n=i.listen_(e.getVertex__(),function(n){r=n,null!==t&&t(),t=D.value(n).listen_(e.getVertex__(),function(t){return e.send_(t)},!1)},!1);return function(){n(),t()}});return e.setVertex__(new I("switchC",0,[o])),e.coalesce__(function(t,n){return n}).holdLazy(n)})},t.switchS=function(t){return R.run(function(){var n=new B,e=function(t){n.send_(t)},r=new w(t.getVertex__(),function(){var r=t.sampleNoTrans__().listen_(n.getVertex__(),e,!1),i=t.getStream__().listen_(n.getVertex__(),function(t){r(),r=t.listen_(n.getVertex__(),e,!0)},!1);return function(){i(),r()}});return n.setVertex__(new I("switchS",0,[r])),n})},t.prototype.listen=function(t){var n=this;return R.run(function(){return D.value(n).listen(t)})},t["fantasy-land/of"]=function(n){return new t(n)},t.prototype["fantasy-land/map"]=function(t){return this.map(t)},t.prototype["fantasy-land/ap"]=function(n){return t.apply(n,this)},t.prototype["fantasy-land/chain"]=function(n){return t.switchC(this.map(n))},t.prototype["fantasy-land/extend"]=function(n){return new t(n(this))},t.prototype["fantasy-land/extract"]=function(){return this.sample()},t}(),M=function(){function t(t,n){this.h=t,this.target=n}return t}(),F=function(t){function n(n,e){var r=t.call(this,null,null)||this;return R.run(function(){e&&r.setStream(e),r.lazyInitValue=n}),r}return v(n,t),n.prototype.sampleNoTrans__=function(){return null==this.value&&null!=this.lazyInitValue&&(this.value=this.lazyInitValue.get(),this.lazyInitValue=null),this.value},n}(U),Q=function(){function t(t){this.listeners=[],this.firings=[],this.vertex=t||new I("Stream",0,[])}return t.prototype.getVertex__=function(){return this.vertex},t.prototype.map=function(t){var n=this,e=new B(null),o=i(t);return e.vertex=new I("map",0,[new w(this.vertex,function(){return n.listen_(e.vertex,function(t){e.send_(o(t))},!1)})].concat(y(r(t)))),e},t.prototype.mapTo=function(t){var n=this,e=new B(null);return e.vertex=new I("mapTo",0,[new w(this.vertex,function(){return n.listen_(e.vertex,function(n){e.send_(t)},!1)})]),e},t.prototype.orElse=function(t){return this.merge(t,function(t,n){return t})},t.prototype.merge_=function(t){var n=this,e=new B,r=new I("merge",0,[]);return r.sources.push(new w(this.vertex,function(){return n.listen_(r,function(t){e.send_(t)},!1)})),e.vertex.sources=e.vertex.sources.concat([new w(r,function(){return r.register(e.vertex),function(){r.deregister(e.vertex)}}),new w(t.vertex,function(){return t.listen_(e.vertex,function(t){e.send_(t)},!1)})]),e},t.prototype.coalesce__=function(t){var n=this,e=new B,r=new q(t,e);return e.vertex.sources=e.vertex.sources.concat([new w(this.vertex,function(){return n.listen_(e.vertex,function(t){r.send_(t)},!1)})]).concat(y(o(t))),e},t.prototype.merge=function(t,n){var e=this;return R.run(function(){return e.merge_(t).coalesce__(n)})},t.prototype.filter=function(t){var n=this,e=new B(null),o=i(t);return e.vertex=new I("filter",0,[new w(this.vertex,function(){return n.listen_(e.vertex,function(t){o(t)&&e.send_(t)},!1)})].concat(y(r(t)))),e},t.prototype.filterNotNull=function(){var t=this,n=new B(null);return n.vertex=new I("filterNotNull",0,[new w(this.vertex,function(){return t.listen_(n.vertex,function(t){null!==t&&n.send_(t)},!1)})]),n},t.prototype.gate=function(t){return this.snapshot(t,function(t,n){return n?t:null}).filterNotNull()},t.prototype.snapshot1=function(t){var n=this,e=new B(null);return e.vertex=new I("snapshot1",0,[new w(this.vertex,function(){return n.listen_(e.vertex,function(n){e.send_(t.sampleNoTrans__())},!1)}),new w(t.getVertex__(),null)]),e},t.prototype.snapshot=function(t,n){var e=this,r=new B(null),i=s(n);return r.vertex=new I("snapshot",0,[new w(this.vertex,function(){return e.listen_(r.vertex,function(n){r.send_(i(n,t.sampleNoTrans__()))},!1)}),new w(t.getVertex__(),null)].concat(y(o(n)))),r},t.prototype.snapshot3=function(t,n,e){var r=this,i=new B(null),o=a(e);return i.vertex=new I("snapshot",0,[new w(this.vertex,function(){return r.listen_(i.vertex,function(e){i.send_(o(e,t.sampleNoTrans__(),n.sampleNoTrans__()))},!1)}),new w(t.getVertex__(),null),new w(n.getVertex__(),null)].concat(y(u(e)))),i},t.prototype.snapshot4=function(t,n,e,r){var i=this,o=new B(null),s=f(r);return o.vertex=new I("snapshot",0,[new w(this.vertex,function(){return i.listen_(o.vertex,function(r){o.send_(s(r,t.sampleNoTrans__(),n.sampleNoTrans__(),e.sampleNoTrans__()))},!1)}),new w(t.getVertex__(),null),new w(n.getVertex__(),null),new w(e.getVertex__(),null)].concat(y(c(r)))),o},t.prototype.snapshot5=function(t,n,e,r,i){var o=this,s=new B(null),u=h(i);return s.vertex=new I("snapshot",0,[new w(this.vertex,function(){return o.listen_(s.vertex,function(i){s.send_(u(i,t.sampleNoTrans__(),n.sampleNoTrans__(),e.sampleNoTrans__(),r.sampleNoTrans__()))},!1)}),new w(t.getVertex__(),null),new w(n.getVertex__(),null),new w(e.getVertex__(),null),new w(r.getVertex__(),null)].concat(y(l(i)))),s},t.prototype.snapshot6=function(t,n,e,r,i,o){var s=this,u=new B(null),a=d(o);return u.vertex=new I("snapshot",0,[new w(this.vertex,function(){return s.listen_(u.vertex,function(o){u.send_(a(o,t.sampleNoTrans__(),n.sampleNoTrans__(),e.sampleNoTrans__(),r.sampleNoTrans__(),i.sampleNoTrans__()))},!1)}),new w(t.getVertex__(),null),new w(n.getVertex__(),null),new w(e.getVertex__(),null),new w(r.getVertex__(),null),new w(i.getVertex__(),null)].concat(y(p(o)))),u},t.prototype.hold=function(t){return new U(t,this)},t.prototype.holdLazy=function(t){return new F(t,this)},t.prototype.collect=function(t,n){return this.collectLazy(new j(function(){return t}),n)},t.prototype.collectLazy=function(t,n){var e=this;return R.run(function(){var r=new W,i=r.holdLazy(t),o=e.snapshot(i,n),s=o.map(function(t){return t.a}),u=o.map(function(t){return t.b});return r.loop(u),s})},t.prototype.accum=function(t,n){return this.accumLazy(new j(function(){return t}),n)},t.prototype.accumLazy=function(t,n){var e=this;return R.run(function(){var r=new W,i=r.holdLazy(t),o=e.snapshot(i,n);return r.loop(o),o.holdLazy(t)})},t.prototype.once=function(){var t=this;return R.run(function(){return t.gate(t.mapTo(!1).hold(!0))})},t.prototype.listen=function(t){var n=this;return R.run(function(){return n.listen_(I.NULL,t,!1)})},t.prototype.listen_=function(t,n,e){var r=this;this.vertex.register(t)&&R.currentTransaction.requestRegen();var i=new M(n,t);if(this.listeners.push(i),!e&&0!=this.firings.length){var o=this.firings.slice();R.currentTransaction.prioritized(t,function(){for(var t=0;t<o.length;t++)n(o[t])})}return function(){for(var n=!1,e=0;e<r.listeners.length;e++)if(r.listeners[e]==i){r.listeners.splice(e,1),n=!0;break}n&&r.vertex.deregister(t)}},t.prototype["fantasy-land/map"]=function(t){return this.map(t)},t.prototype["fantasy-land/concat"]=function(t){return this.merge(t,function(t,n){return g.Semigroup.test(t)?Object(g.concat)(t,n):t})},t.prototype["fantasy-land/empty"]=function(){return new t},t}(),B=function(t){function n(n){return t.call(this,n)||this}return v(n,t),n.prototype.setVertex__=function(t){this.vertex=t},n.prototype.send_=function(t){var n=this;if(0==this.vertex.refCount())throw new Error("send() was invoked before listeners were registered");0==this.firings.length&&R.currentTransaction.last(function(){n.firings=[]}),this.firings.push(t);for(var e=this.listeners.slice(),r=0;r<e.length;r++)!function(n){var r=e[n].h;R.currentTransaction.prioritized(e[n].target,function(){R.currentTransaction.inCallback++;try{r(t),R.currentTransaction.inCallback--}catch(t){throw R.currentTransaction.inCallback--,t}})}(r)},n}(Q),W=function(t){function n(){var n=t.call(this)||this;if(n.assigned__=!1,n.vertex.name="StreamLoop",null===R.currentTransaction)throw new Error("StreamLoop/CellLoop must be used within an explicit transaction");return n}return v(n,t),n.prototype.loop=function(t){var n=this;if(this.assigned__)throw new Error("StreamLoop looped more than once");this.assigned__=!0,this.vertex.addSource(new w(t.getVertex__(),function(){return t.listen_(n.vertex,function(t){n.send_(t)},!1)}))},n}(B),H=function(t){function n(n){var e=t.call(this)||this;return n||(n=function(t,n){throw new Error("send() called more than once per transaction, which isn't allowed. Did you want to combine the events? Then pass a combining function to your StreamSink constructor.")}),e.coalescer=new q(n,e),e}return v(n,t),n.prototype.send=function(t){var n=this;R.run(function(){if(R.currentTransaction.inCallback>0)throw new Error("You are not allowed to use send() inside a Sodium callback");n.coalescer.send_(t)})},n}(B),$=function(t){function n(){return t.call(this,null,new W)||this}return v(n,t),n.prototype.loop=function(t){var n=this;R.run(function(){n.getStream__().loop(t.getStream__()),n.lazyInitValue=t.sampleLazy()})},n.prototype.sampleNoTrans__=function(){if(!this.getStream__().assigned__)throw new Error("CellLoop sampled before it was looped");return t.prototype.sampleNoTrans__.call(this)},n}(F),K=function(t){function n(n,e){return t.call(this,n,new H(e))||this}return v(n,t),n.prototype.send=function(t){this.getStream__().send(t)},n}(U),G=(function(){function t(t,n){this.a=t,this.b=n}}(),function(){function t(){}return t}()),Y=0,J=function(){function t(t,n){this.t=t,this.sAlarm=n,this.seq=++Y}return t}(),X=function(){function t(t){var n=this;this.eventQueue=new _.BSTree(function(t,n){return t.t<n.t?-1:t.t>n.t?1:t.seq<n.seq?-1:t.seq>n.seq?1:0}),R.run(function(){n.impl=t,n.tMinimum=0;var e=new K(t.now());n.time=e,n.time.listen(function(t){}),R.onStart(function(){for(var r=n.tMinimum=Math.max(n.tMinimum,t.now());;){if("break"===function(){var t=null;if(!n.eventQueue.isEmpty()){var i=n.eventQueue.minimum();i.t<=r&&(t=i)}if(null==t)return"break";e.send(t.t),R.run(function(){return t.sAlarm.send_(t.t)})}())break}e.send(r)})})}return t.prototype.at=function(t){var n=this,e=null,r=null,i=!1,o=null,s=!1,u=new B(null),a=function(){null!==r&&(r(),n.eventQueue.remove(e)),r=null,e=null,i&&(s||(s=!0,o=t.sampleNoTrans__()),null!==o&&(e=new J(o,u),n.eventQueue.add(e),r=n.impl.setTimer(o,function(){n.tMinimum=Math.max(n.tMinimum,o),R.run(function(){})})))};return u.setVertex__(new I("at",0,[new w(t.getVertex__(),function(){i=!0,s=!1,R.currentTransaction.prioritized(u.getVertex__(),a);var n=t.getStream__().listen_(u.getVertex__(),function(t){o=t,s=!0,a()},!1);return function(){i=!1,a(),n()}})])),u},t}(),Z=function(t){function n(){return t.call(this,new tt)||this}return v(n,t),n}(X),tt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return v(n,t),n.prototype.setTimer=function(t,n){var e=setTimeout(n,Math.max(1e3*(t-this.now()),0));return function(){clearTimeout(e)}},n.prototype.now=function(){return.001*Date.now()},n}(G),nt=(function(t){function n(){return t.call(this,new nt)||this}v(n,t)}(X),function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return v(n,t),n.prototype.setTimer=function(t,n){var e=setTimeout(n,Math.max(t-this.now(),0));return function(){clearTimeout(e)}},n.prototype.now=function(){return Date.now()},n}(G));!function(){function t(){}/*!
     * Convert a function that performs asynchronous I/O taking input A
     * and returning a value of type B into an I/O action of type
     * (sa : Stream<A>) => Stream<B>
     */
t.fromAsync=function(t){return function(n){var e=new B(null);return e.setVertex__(new I("map",0,[new w(n.getVertex__(),function(){return n.listen_(e.getVertex__(),function(n){t(n,function(t){R.run(function(){e.send_(t)})})},!1)})])),e}}}()},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(0),i=e(2),o=function(){function t(){this.firstNode=null,this.lastNode=null,this.nElements=0}return t.prototype.add=function(t,n){if(r.isUndefined(n)&&(n=this.nElements),n<0||n>this.nElements||r.isUndefined(t))return!1;var e=this.createNode(t);if(0===this.nElements||null===this.lastNode)this.firstNode=e,this.lastNode=e;else if(n===this.nElements)this.lastNode.next=e,this.lastNode=e;else if(0===n)e.next=this.firstNode,this.firstNode=e;else{var i=this.nodeAtIndex(n-1);if(null==i)return!1;e.next=i.next,i.next=e}return this.nElements++,!0},t.prototype.first=function(){if(null!==this.firstNode)return this.firstNode.element},t.prototype.last=function(){if(null!==this.lastNode)return this.lastNode.element},t.prototype.elementAtIndex=function(t){var n=this.nodeAtIndex(t);if(null!==n)return n.element},t.prototype.indexOf=function(t,n){var e=n||r.defaultEquals;if(r.isUndefined(t))return-1;for(var i=this.firstNode,o=0;null!==i;){if(e(i.element,t))return o;o++,i=i.next}return-1},t.prototype.contains=function(t,n){return this.indexOf(t,n)>=0},t.prototype.remove=function(t,n){var e=n||r.defaultEquals;if(this.nElements<1||r.isUndefined(t))return!1;for(var i=null,o=this.firstNode;null!==o;){if(e(o.element,t))return null==i?(this.firstNode=o.next,o===this.lastNode&&(this.lastNode=null)):o===this.lastNode?(this.lastNode=i,i.next=o.next,o.next=null):(i.next=o.next,o.next=null),this.nElements--,!0;i=o,o=o.next}return!1},t.prototype.clear=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},t.prototype.equals=function(n,e){var i=e||r.defaultEquals;return n instanceof t&&(this.size()===n.size()&&this.equalsAux(this.firstNode,n.firstNode,i))},t.prototype.equalsAux=function(t,n,e){for(;null!==t&&null!==n;){if(!e(t.element,n.element))return!1;t=t.next,n=n.next}return!0},t.prototype.removeElementAtIndex=function(t){if(!(t<0||t>=this.nElements||null===this.firstNode||null===this.lastNode)){var n;if(1===this.nElements)n=this.firstNode.element,this.firstNode=null,this.lastNode=null;else{var e=this.nodeAtIndex(t-1);null===e?(n=this.firstNode.element,this.firstNode=this.firstNode.next):e.next===this.lastNode&&(n=this.lastNode.element,this.lastNode=e),null!==e&&null!==e.next&&(n=e.next.element,e.next=e.next.next)}return this.nElements--,n}},t.prototype.forEach=function(t){for(var n=this.firstNode;null!==n&&!1!==t(n.element);)n=n.next},t.prototype.reverse=function(){for(var t=null,n=this.firstNode,e=null;null!==n;)e=n.next,n.next=t,t=n,n=e;e=this.firstNode,this.firstNode=this.lastNode,this.lastNode=e},t.prototype.toArray=function(){for(var t=[],n=this.firstNode;null!==n;)t.push(n.element),n=n.next;return t},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return this.nElements<=0},t.prototype.toString=function(){return i.toString(this.toArray())},t.prototype.nodeAtIndex=function(t){if(t<0||t>=this.nElements)return null;if(t===this.nElements-1)return this.lastNode;for(var n=this.firstNode,e=0;e<t&&null!=n;e++)n=n.next;return n},t.prototype.createNode=function(t){return{element:t,next:null}},t}();n.default=o},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(0),i=e(2),o=e(1),s=function(){function t(t){this.dictionary=new o.default(t)}return t.prototype.contains=function(t){return this.dictionary.containsKey(t)},t.prototype.add=function(t){return!this.contains(t)&&!r.isUndefined(t)&&(this.dictionary.setValue(t,t),!0)},t.prototype.intersection=function(t){var n=this;this.forEach(function(e){return t.contains(e)||n.remove(e),!0})},t.prototype.union=function(t){var n=this;t.forEach(function(t){return n.add(t),!0})},t.prototype.difference=function(t){var n=this;t.forEach(function(t){return n.remove(t),!0})},t.prototype.isSubsetOf=function(t){if(this.size()>t.size())return!1;var n=!0;return this.forEach(function(e){return!!t.contains(e)||(n=!1,!1)}),n},t.prototype.remove=function(t){return!!this.contains(t)&&(this.dictionary.remove(t),!0)},t.prototype.forEach=function(t){this.dictionary.forEach(function(n,e){return t(e)})},t.prototype.toArray=function(){return this.dictionary.values()},t.prototype.isEmpty=function(){return this.dictionary.isEmpty()},t.prototype.size=function(){return this.dictionary.size()},t.prototype.clear=function(){this.dictionary.clear()},t.prototype.toString=function(){return i.toString(this.toArray())},t}();n.default=s},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(0),i=e(7),o=function(){function t(t){this.root=null,this.compare=t||r.defaultCompare,this.nElements=0}return t.prototype.add=function(t){return!r.isUndefined(t)&&(null!==this.insertNode(this.createNode(t))&&(this.nElements++,!0))},t.prototype.clear=function(){this.root=null,this.nElements=0},t.prototype.isEmpty=function(){return 0===this.nElements},t.prototype.size=function(){return this.nElements},t.prototype.contains=function(t){return!r.isUndefined(t)&&null!==this.searchNode(this.root,t)},t.prototype.search=function(t){var n=this.searchNode(this.root,t);if(null!==n)return n.element},t.prototype.remove=function(t){var n=this.searchNode(this.root,t);return null!==n&&(this.removeNode(n),this.nElements--,!0)},t.prototype.inorderTraversal=function(t){this.inorderTraversalAux(this.root,t,{stop:!1})},t.prototype.preorderTraversal=function(t){this.preorderTraversalAux(this.root,t,{stop:!1})},t.prototype.postorderTraversal=function(t){this.postorderTraversalAux(this.root,t,{stop:!1})},t.prototype.levelTraversal=function(t){this.levelTraversalAux(this.root,t)},t.prototype.minimum=function(){if(!this.isEmpty()&&null!==this.root)return this.minimumAux(this.root).element},t.prototype.maximum=function(){if(!this.isEmpty()&&null!==this.root)return this.maximumAux(this.root).element},t.prototype.forEach=function(t){this.inorderTraversal(t)},t.prototype.toArray=function(){var t=[];return this.inorderTraversal(function(n){return t.push(n),!0}),t},t.prototype.height=function(){return this.heightAux(this.root)},t.prototype.searchNode=function(t,n){for(var e=1;null!==t&&0!==e;)e=this.compare(n,t.element),e<0?t=t.leftCh:e>0&&(t=t.rightCh);return t},t.prototype.transplant=function(t,n){null===t.parent?this.root=n:t===t.parent.leftCh?t.parent.leftCh=n:t.parent.rightCh=n,null!==n&&(n.parent=t.parent)},t.prototype.removeNode=function(t){if(null===t.leftCh)this.transplant(t,t.rightCh);else if(null===t.rightCh)this.transplant(t,t.leftCh);else{var n=this.minimumAux(t.rightCh);n.parent!==t&&(this.transplant(n,n.rightCh),n.rightCh=t.rightCh,n.rightCh.parent=n),this.transplant(t,n),n.leftCh=t.leftCh,n.leftCh.parent=n}},t.prototype.inorderTraversalAux=function(t,n,e){null===t||e.stop||(this.inorderTraversalAux(t.leftCh,n,e),e.stop||(e.stop=!1===n(t.element),e.stop||this.inorderTraversalAux(t.rightCh,n,e)))},t.prototype.levelTraversalAux=function(t,n){var e=new i.default;for(null!==t&&e.enqueue(t),t=e.dequeue()||null;null!=t;){if(!1===n(t.element))return;null!==t.leftCh&&e.enqueue(t.leftCh),null!==t.rightCh&&e.enqueue(t.rightCh),t=e.dequeue()||null}},t.prototype.preorderTraversalAux=function(t,n,e){null===t||e.stop||(e.stop=!1===n(t.element),e.stop||(this.preorderTraversalAux(t.leftCh,n,e),e.stop||this.preorderTraversalAux(t.rightCh,n,e)))},t.prototype.postorderTraversalAux=function(t,n,e){null===t||e.stop||(this.postorderTraversalAux(t.leftCh,n,e),e.stop||(this.postorderTraversalAux(t.rightCh,n,e),e.stop||(e.stop=!1===n(t.element))))},t.prototype.minimumAux=function(t){for(;null!=t&&null!==t.leftCh;)t=t.leftCh;return t},t.prototype.maximumAux=function(t){for(;null!=t&&null!==t.rightCh;)t=t.rightCh;return t},t.prototype.heightAux=function(t){return null===t?-1:Math.max(this.heightAux(t.leftCh),this.heightAux(t.rightCh))+1},t.prototype.insertNode=function(t){for(var n=null,e=this.root;null!==e;){var r=this.compare(t.element,e.element);if(0===r)return null;r<0?(n=e,e=e.leftCh):(n=e,e=e.rightCh)}return t.parent=n,null===n?this.root=t:this.compare(t.element,n.element)<0?n.leftCh=t:n.rightCh=t,t},t.prototype.createNode=function(t){return{element:t,leftCh:null,rightCh:null,parent:null}},t}();n.default=o},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(4),i=function(){function t(){this.list=new r.default}return t.prototype.enqueue=function(t){return this.list.add(t)},t.prototype.add=function(t){return this.list.add(t)},t.prototype.dequeue=function(){if(0!==this.list.size()){var t=this.list.first();return this.list.removeElementAtIndex(0),t}},t.prototype.peek=function(){if(0!==this.list.size())return this.list.first()},t.prototype.size=function(){return this.list.size()},t.prototype.contains=function(t,n){return this.list.contains(t,n)},t.prototype.isEmpty=function(){return this.list.size()<=0},t.prototype.clear=function(){this.list.clear()},t.prototype.forEach=function(t){this.list.forEach(t)},t}();n.default=i},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(0),i=e(2),o=function(){function t(t){this.data=[],this.compare=t||r.defaultCompare}return t.prototype.leftChildIndex=function(t){return 2*t+1},t.prototype.rightChildIndex=function(t){return 2*t+2},t.prototype.parentIndex=function(t){return Math.floor((t-1)/2)},t.prototype.minIndex=function(t,n){return n>=this.data.length?t>=this.data.length?-1:t:this.compare(this.data[t],this.data[n])<=0?t:n},t.prototype.siftUp=function(t){for(var n=this.parentIndex(t);t>0&&this.compare(this.data[n],this.data[t])>0;)i.swap(this.data,n,t),t=n,n=this.parentIndex(t)},t.prototype.siftDown=function(t){for(var n=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t));n>=0&&this.compare(this.data[t],this.data[n])>0;)i.swap(this.data,n,t),t=n,n=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t))},t.prototype.peek=function(){return this.data.length>0?this.data[0]:void 0},t.prototype.add=function(t){return!r.isUndefined(t)&&(this.data.push(t),this.siftUp(this.data.length-1),!0)},t.prototype.removeRoot=function(){if(this.data.length>0){var t=this.data[0];return this.data[0]=this.data[this.data.length-1],this.data.splice(this.data.length-1,1),this.data.length>0&&this.siftDown(0),t}},t.prototype.contains=function(t){var n=r.compareToEquals(this.compare);return i.contains(this.data,t,n)},t.prototype.size=function(){return this.data.length},t.prototype.isEmpty=function(){return this.data.length<=0},t.prototype.clear=function(){this.data.length=0},t.prototype.forEach=function(t){i.forEach(this.data,t)},t}();n.default=o},function(t,n,e){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e(1),o=e(0),s=function(t){function n(n,e){var r=t.call(this,e)||this;return r.defaultFactoryFunction=n,r}return r(n,t),n.prototype.setDefault=function(n,e){var r=t.prototype.getValue.call(this,n);return o.isUndefined(r)?(this.setValue(n,e),e):r},n.prototype.getValue=function(t){return this.setDefault(t,this.defaultFactoryFunction())},n}(i.default);n.default=s},function(t,n,e){var r,i,o;!function(s){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=s():null!=e(11)?(i=[],r=s,void 0!==(o="function"==typeof r?r.apply(n,i):r)&&(t.exports=o)):self.sanctuaryTypeIdentifiers=s()}(function(){"use strict";function t(t){return null!=t&&null!=t.constructor&&t.constructor.prototype!==t&&"string"==typeof t.constructor[n]?t.constructor[n]:Object.prototype.toString.call(t).slice("[object ".length,-"]".length)}var n="@@type";return t})},function(t,n){(function(n){t.exports=n}).call(n,{})},function(t,n,e){"use strict";e.d(n,"a",function(){return r});var r;!function(t){t[t.stopped=0]="stopped",t[t.running=1]="running"}(r||(r={}))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(14),i=e(3),o=e(26),s=(e.n(o),e(12));window.onload=function(){var t,n,e,u=o,a=document.getElementsByClassName("container")[0],c=document.getElementById("restart"),f=document.getElementById("log"),l=document.getElementById("frequency"),h=!1,p=function(){t=+l.value,60===t?(n=requestAnimationFrame,e=cancelAnimationFrame):(n=function(t,n){return setTimeout(t,n)},e=clearTimeout),document.querySelector("label[for='frequency']").innerText="FPS:"+t,e(void 0)};if(!u.canvas)return void(a.innerHTML="please use modern browsers like Chrome that supports canvas to get the best user experience.");a.innerHTML="<canvas id='canvas' width='1680' height='720' style='width: 100%;border:1px solid;box-sizing: border-box;'></canvas>";var d=document.getElementById("canvas"),y=d.getContext("2d"),v=function(){h=!1;var o=new Date,u={width:d.width,height:d.height},a=new i.d;p(),i.f.run(function(){function l(){h||(y.clearRect(0,0,u.width,u.height),d.sample().draw(y),n(l,1e3/t))}var p=Object(r.a)(a,u),d=p.cBall,v=p.sPhase;i.c.updates(d).listen(function(t){return t}),v.listen(function(t){if(t===s.a.stopped){h=!0;var n=new Date,r="from "+o+" to "+n+", total: "+(+n-+o)/1e3+" seconds",i=document.createElement("p");i.innerText=r,f.appendChild(i),c.disabled=!1,e(void 0)}else c.disabled=!0}),l()})};l.addEventListener("input",p),c.addEventListener("click",function(){return v()}),v()}},function(t,n,e){"use strict";var r=e(3),i=e(24),o=e(25),s=e(12),u=function(t,n,e,r){var i=e.map(function(t){return t.when(r)});return t.at(i).snapshot(n,function(t,n){return t?new o.a(t,n.a,n.b,.95*-n.valueAt(t)):null}).filterNotNull()};n.a=function(t,n){var e=t.time,a=e.sample(),c=new r.a(new i.a({radius:25,border:1})),f=n.width-25-1,l=n.height-25-1,h=new o.a(a,0,0,1200),p=new r.e,d=new r.e,y=p.hold(new o.a(a,0,0,350)),v=d.hold(h.integrate(0)),m=o.a.integrate(y,26),_=o.a.integrate(v,26),g=new r.b;p.loop(u(t,y,m,26).orElse(u(t,y,m,f))),d.loop(u(t,v,_,l));var x=r.c.value(e.lift(_,function(t,n){return n.valueAt(t)>l+50?s.a.stopped:s.a.running})).snapshot(g,function(t,n){return t===n?null:t}).filterNotNull();return g.loop(x.hold(null)),{cBall:e.lift4(m,_,c,function(t,n,e,r){return r.translate(n.valueAt(t),e.valueAt(t))}),sPhase:x}}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(2);n.arrays=r;var i=e(16);n.Bag=i.default;var o=e(17);n.BSTree=o.default;var s=e(6);n.BSTreeKV=s.default;var u=e(1);n.Dictionary=u.default;var a=e(8);n.Heap=a.default;var c=e(18);n.LinkedDictionary=c.default;var f=e(4);n.LinkedList=f.default;var l=e(19);n.MultiDictionary=l.default;var h=e(9);n.FactoryDictionary=h.default;var p=e(9);n.DefaultDictionary=p.default;var d=e(7);n.Queue=d.default;var y=e(20);n.PriorityQueue=y.default;var v=e(5);n.Set=v.default;var m=e(21);n.Stack=m.default;var _=e(22);n.MultiRootTree=_.default;var g=e(0);n.util=g},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(0),i=e(1),o=e(5),s=function(){function t(t){this.toStrF=t||r.defaultToString,this.dictionary=new i.default(this.toStrF),this.nElements=0}return t.prototype.add=function(t,n){if(void 0===n&&(n=1),r.isUndefined(t)||n<=0)return!1;if(this.contains(t))this.dictionary.getValue(t).copies+=n;else{var e={value:t,copies:n};this.dictionary.setValue(t,e)}return this.nElements+=n,!0},t.prototype.count=function(t){return this.contains(t)?this.dictionary.getValue(t).copies:0},t.prototype.contains=function(t){return this.dictionary.containsKey(t)},t.prototype.remove=function(t,n){if(void 0===n&&(n=1),r.isUndefined(t)||n<=0)return!1;if(this.contains(t)){var e=this.dictionary.getValue(t);return n>e.copies?this.nElements-=e.copies:this.nElements-=n,e.copies-=n,e.copies<=0&&this.dictionary.remove(t),!0}return!1},t.prototype.toArray=function(){for(var t=[],n=this.dictionary.values(),e=0,r=n;e<r.length;e++)for(var i=r[e],o=i.value,s=i.copies,u=0;u<s;u++)t.push(o);return t},t.prototype.toSet=function(){for(var t=new o.default(this.toStrF),n=this.dictionary.values(),e=0,r=n;e<r.length;e++){var i=r[e],s=i.value;t.add(s)}return t},t.prototype.forEach=function(t){this.dictionary.forEach(function(n,e){for(var r=e.value,i=e.copies,o=0;o<i;o++)if(!1===t(r))return!1;return!0})},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return 0===this.nElements},t.prototype.clear=function(){this.nElements=0,this.dictionary.clear()},t}();n.default=s},function(t,n,e){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e(6),o=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r(n,t),n}(i.default);n.default=o},function(t,n,e){"use strict";function r(t){return null===t.next}var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e(1),s=e(0),u=function(){function t(t,n){this.key=t,this.value=n}return t.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},t}(),a=function(){function t(){this.key=null,this.value=null}return t.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},t}(),c=function(t){function n(n){var e=t.call(this,n)||this;return e.head=new a,e.tail=new a,e.head.next=e.tail,e.tail.prev=e.head,e}return i(n,t),n.prototype.appendToTail=function(t){var n=this.tail.prev;n.next=t,t.prev=n,t.next=this.tail,this.tail.prev=t},n.prototype.getLinkedDictionaryPair=function(t){if(!s.isUndefined(t)){var n="$"+this.toStr(t);return this.table[n]}},n.prototype.getValue=function(t){var n=this.getLinkedDictionaryPair(t);if(!s.isUndefined(n))return n.value},n.prototype.remove=function(n){var e=this.getLinkedDictionaryPair(n);if(!s.isUndefined(e))return t.prototype.remove.call(this,n),e.unlink(),e.value},n.prototype.clear=function(){t.prototype.clear.call(this),this.head.next=this.tail,this.tail.prev=this.head},n.prototype.replace=function(t,n){var e="$"+this.toStr(n.key);n.next=t.next,n.prev=t.prev,this.remove(t.key),n.prev.next=n,n.next.prev=n,this.table[e]=n,++this.nElements},n.prototype.setValue=function(t,n){if(!s.isUndefined(t)&&!s.isUndefined(n)){var e=this.getLinkedDictionaryPair(t),r=new u(t,n),i="$"+this.toStr(t);return s.isUndefined(e)?(this.appendToTail(r),this.table[i]=r,void++this.nElements):(this.replace(e,r),e.value)}},n.prototype.keys=function(){var t=[];return this.forEach(function(n,e){t.push(n)}),t},n.prototype.values=function(){var t=[];return this.forEach(function(n,e){t.push(e)}),t},n.prototype.forEach=function(t){for(var n=this.head.next;!r(n);){if(!1===t(n.key,n.value))return;n=n.next}},n}(o.default);n.default=c},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(0),i=e(1),o=e(2),s=function(){function t(t,n,e){void 0===e&&(e=!1),this.dict=new i.default(t),this.equalsF=n||r.defaultEquals,this.allowDuplicate=e}return t.prototype.getValue=function(t){var n=this.dict.getValue(t);return r.isUndefined(n)?[]:o.copy(n)},t.prototype.setValue=function(t,n){if(r.isUndefined(t)||r.isUndefined(n))return!1;var e=this.dict.getValue(t);return r.isUndefined(e)?(this.dict.setValue(t,[n]),!0):!(!this.allowDuplicate&&o.contains(e,n,this.equalsF))&&(e.push(n),!0)},t.prototype.remove=function(t,n){if(r.isUndefined(n)){var e=this.dict.remove(t);return!r.isUndefined(e)}var i=this.dict.getValue(t);return!(r.isUndefined(i)||!o.remove(i,n,this.equalsF))&&(0===i.length&&this.dict.remove(t),!0)},t.prototype.keys=function(){return this.dict.keys()},t.prototype.values=function(){for(var t=this.dict.values(),n=[],e=0,r=t;e<r.length;e++)for(var i=r[e],o=0,s=i;o<s.length;o++){var u=s[o];n.push(u)}return n},t.prototype.containsKey=function(t){return this.dict.containsKey(t)},t.prototype.clear=function(){this.dict.clear()},t.prototype.size=function(){return this.dict.size()},t.prototype.isEmpty=function(){return this.dict.isEmpty()},t}();n.default=s},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(0),i=e(8),o=function(){function t(t){this.heap=new i.default(r.reverseCompareFunction(t))}return t.prototype.enqueue=function(t){return this.heap.add(t)},t.prototype.add=function(t){return this.heap.add(t)},t.prototype.dequeue=function(){if(0!==this.heap.size()){var t=this.heap.peek();return this.heap.removeRoot(),t}},t.prototype.peek=function(){return this.heap.peek()},t.prototype.contains=function(t){return this.heap.contains(t)},t.prototype.isEmpty=function(){return this.heap.isEmpty()},t.prototype.size=function(){return this.heap.size()},t.prototype.clear=function(){this.heap.clear()},t.prototype.forEach=function(t){this.heap.forEach(t)},t}();n.default=o},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(4),i=function(){function t(){this.list=new r.default}return t.prototype.push=function(t){return this.list.add(t,0)},t.prototype.add=function(t){return this.list.add(t,0)},t.prototype.pop=function(){return this.list.removeElementAtIndex(0)},t.prototype.peek=function(){return this.list.first()},t.prototype.size=function(){return this.list.size()},t.prototype.contains=function(t,n){return this.list.contains(t,n)},t.prototype.isEmpty=function(){return this.list.isEmpty()},t.prototype.clear=function(){this.list.clear()},t.prototype.forEach=function(t){this.list.forEach(t)},t}();n.default=i},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r;!function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER",t[t.INSIDE_AT_END=2]="INSIDE_AT_END",t[t.INSIDE_AT_START=3]="INSIDE_AT_START"}(r||(r={}));var i=function(){function t(t,n){void 0===t&&(t=[]),void 0===n&&(n={}),this.rootIds=t,this.nodes=n,this.initRootIds(),this.initNodes()}return t.prototype.initRootIds=function(){for(var t=0,n=this.rootIds;t<n.length;t++){var e=n[t];this.createEmptyNodeIfNotExist(e)}},t.prototype.initNodes=function(){for(var t in this.nodes)if(this.nodes.hasOwnProperty(t))for(var n=0,e=this.nodes[t];n<e.length;n++){var r=e[n];this.createEmptyNodeIfNotExist(r)}},t.prototype.createEmptyNodeIfNotExist=function(t){this.nodes[t]||(this.nodes[t]=[])},t.prototype.getRootIds=function(){return this.rootIds.slice()},t.prototype.getNodes=function(){var t={};for(var n in this.nodes)this.nodes.hasOwnProperty(n)&&(t[n]=this.nodes[n].slice());return t},t.prototype.getObject=function(){return{rootIds:this.getRootIds(),nodes:this.getNodes()}},t.prototype.toObject=function(){return this.getObject()},t.prototype.flatten=function(){function t(n,e,r,i){if(void 0===i&&(i=0),n&&e&&r&&e[n]){i++;for(var o=e[n],s=0;s<o.length;s++){var u=o[s];r.push({id:u,level:i,hasParent:!0}),t(u,e,r,i)}i--}}for(var n=this,e=[],r=0;r<this.rootIds.length;r++){var i=this.rootIds[r];e.push({id:i,level:0,hasParent:!1,childrenCount:0}),t(i,this.nodes,e,0)}for(var o=0,s=e;o<s.length;o++){var u=s[o];u.childrenCount=function(t){if(n.nodes[t]){return n.nodes[t].length}return 0}(u.id)}return e},t.prototype.moveIdBeforeId=function(t,n){return this.moveId(t,n,r.BEFORE)},t.prototype.moveIdAfterId=function(t,n){return this.moveId(t,n,r.AFTER)},t.prototype.moveIdIntoId=function(t,n,e){return void 0===e&&(e=!0),e?this.moveId(t,n,r.INSIDE_AT_START):this.moveId(t,n,r.INSIDE_AT_END)},t.prototype.swapRootIdWithRootId=function(t,n){var e=this.findRootId(t),r=this.findRootId(n);this.swapRootPositionWithRootPosition(e,r)},t.prototype.swapRootPositionWithRootPosition=function(t,n){var e=this.rootIds[n];this.rootIds[n]=this.rootIds[t],this.rootIds[t]=e},t.prototype.deleteId=function(t){this.rootDeleteId(t),this.nodeAndSubNodesDelete(t),this.nodeRefrencesDelete(t)},t.prototype.insertIdBeforeId=function(t,n){var e=this.findRootId(t);e>-1&&this.insertIdIntoRoot(n,e);for(var r in this.nodes)if(this.nodes.hasOwnProperty(r)){var i=this.findNodeId(r,t);i>-1&&this.insertIdIntoNode(r,n,i)}},t.prototype.insertIdAfterId=function(t,n){var e=this.findRootId(t);e>-1&&this.insertIdIntoRoot(n,e+1);for(var r in this.nodes)if(this.nodes.hasOwnProperty(r)){var i=this.findNodeId(r,t);i>-1&&this.insertIdIntoNode(r,n,i+1)}},t.prototype.insertIdIntoId=function(t,n){this.nodeInsertAtEnd(t,n),this.nodes[n]=[]},t.prototype.insertIdIntoRoot=function(t,n){if(void 0===n)this.rootInsertAtEnd(t);else if(n<0){var e=this.rootIds.length;this.rootIds.splice(n+e+1,0,t)}else this.rootIds.splice(n,0,t);this.nodes[t]=this.nodes[t]||[]},t.prototype.insertIdIntoNode=function(t,n,e){if(this.nodes[t]=this.nodes[t]||[],this.nodes[n]=this.nodes[n]||[],void 0===e)this.nodeInsertAtEnd(t,n);else if(e<0){var r=this.nodes[t].length;this.nodes[t].splice(e+r+1,0,n)}else this.nodes[t].splice(e,0,n)},t.prototype.moveId=function(t,n,e){var i=t,o=this.findRootId(i);this.nodes[n];for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){this.findNodeId(s,n);break}var u=n,a=this.findRootId(u);this.nodes[n];for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){this.findNodeId(s,n);break}if(o>-1)if(a>-1)switch(this.rootDelete(o),a>o&&a--,e){case r.BEFORE:this.insertIdIntoRoot(i,a);break;case r.AFTER:this.insertIdIntoRoot(i,a+1);break;case r.INSIDE_AT_START:this.nodeInsertAtStart(u,i);break;case r.INSIDE_AT_END:this.nodeInsertAtEnd(u,i)}else{this.rootDelete(o);for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var c=this.findNodeId(s,u);if(c>-1){switch(e){case r.BEFORE:this.insertIdIntoNode(s,i,c);break;case r.AFTER:this.insertIdIntoNode(s,i,c+1);break;case r.INSIDE_AT_START:this.nodeInsertAtStart(u,i);break;case r.INSIDE_AT_END:this.nodeInsertAtEnd(u,i)}break}}}else if(a>-1){for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var c=this.findNodeId(s,i);if(c>-1){this.nodeDeleteAtIndex(s,c);break}}switch(e){case r.BEFORE:this.insertIdIntoRoot(i,a);break;case r.AFTER:this.insertIdIntoRoot(i,a+1);break;case r.INSIDE_AT_START:this.nodeInsertAtStart(u,i);break;case r.INSIDE_AT_END:this.nodeInsertAtEnd(u,i)}}else{for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var c=this.findNodeId(s,i);if(c>-1){this.nodeDeleteAtIndex(s,c);break}}for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var c=this.findNodeId(s,u);if(c>-1){switch(e){case r.BEFORE:this.insertIdIntoNode(s,i,c);break;case r.AFTER:this.insertIdIntoNode(s,i,c+1);break;case r.INSIDE_AT_START:this.nodeInsertAtStart(u,i);break;case r.INSIDE_AT_END:this.nodeInsertAtEnd(u,i)}break}}}},t.prototype.swapArrayElements=function(t,n,e){var r=t[n];return t[n]=t[e],t[e]=r,t},t.prototype.rootDeleteId=function(t){var n=this.findRootId(t);n>-1&&this.rootDelete(n)},t.prototype.nodeAndSubNodesDelete=function(t){for(var n=[],e=0;e<this.nodes[t].length;e++){var r=this.nodes[t][e];this.nodeAndSubNodesDelete(r),n.push(t)}this.nodeDelete(t);for(var e=0;e<n.length;e++)this.nodeDelete(n[e])},t.prototype.nodeRefrencesDelete=function(t){for(var n in this.nodes)if(this.nodes.hasOwnProperty(n))for(var e=0;e<this.nodes[n].length;e++){var r=this.nodes[n][e];r===t&&this.nodeDeleteAtIndex(n,e)}},t.prototype.nodeDelete=function(t){delete this.nodes[t]},t.prototype.findRootId=function(t){return this.rootIds.indexOf(t)},t.prototype.findNodeId=function(t,n){return this.nodes[t].indexOf(n)},t.prototype.findNode=function(t){return this.nodes[t]},t.prototype.nodeInsertAtStart=function(t,n){this.nodes[t].unshift(n)},t.prototype.nodeInsertAtEnd=function(t,n){this.nodes[t].push(n)},t.prototype.rootDelete=function(t){this.rootIds.splice(t,1)},t.prototype.nodeDeleteAtIndex=function(t,n){this.nodes[t].splice(n,1)},t.prototype.rootInsertAtStart=function(t){this.rootIds.unshift(t)},t.prototype.rootInsertAtEnd=function(t){this.rootIds.push(t)},t}();n.default=i},function(t,n,e){var r,i,o;!function(s){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=s(e(10)):null!=e(11)?(i=[e(10)],r=s,void 0!==(o="function"==typeof r?r.apply(n,i):r)&&(t.exports=o)):self.sanctuaryTypeClasses=s(self.sanctuaryTypeIdentifiers)}(function(t){"use strict";function n(t){return function(n){return t.concat(n)}}function e(t){return function(n){return t}}function r(t,n){Object.keys(t).forEach(n,t)}function i(t,n){return Object.prototype.hasOwnProperty.call(n,t)}function o(t){return t}function s(t){return function(n){return[t,n]}}function u(n,e){return typeof n==typeof e&&t(n)===t(e)}function a(t){return{value:t,done:!1}}function c(t){return{value:t,done:!0}}function f(t,n,e,r){if(!(this instanceof f))return new f(t,n,e,r);this.name=t,this.url=n,this.test=function(t){return e.every(function(n){return n.test(t)})&&r(t)}}function l(t,n,e){for(var r=e,o=0;o<n.length;o+=1){var s=n[o];if(null==r||!t&&!i(s,r))return null;r=r[s]}return"function"==typeof r?r:null}function h(t,n){return l(!0,t,n)}function p(t){return l(!1,t,Wn)}function d(n,e,r){function i(n){var e="fantasy-land/"+n;return r[n]===vn?function(t){var n=h([e],t);return null==n&&"function"==typeof t?p([_n(t),e]):n}:function(n){var r=null!=n&&null!=n.constructor&&n.constructor.prototype===n,i=null;return r||(i=h([e],n)),null==i&&(i=p([t(n),"prototype",e])),i&&i.bind(n)}}var o=Object.keys(r),s=f("sanctuary-type-classes/"+n,"https://github.com/sanctuary-js/sanctuary-type-classes/tree/v8.1.1#"+n,e,function(t){return o.every(function(n){var e=r[n]===vn?t.constructor:t;return null!=i(n)(e)})});return s.methods=o.reduce(function(t,n){return t[n]=i(n),t},{}),s}function y(){return"null"}function v(t){return!0}function m(t){return!0}function _(){return"undefined"}function g(t){return!0}function x(t){return!0}function w(){return"object"==typeof this?"new Boolean("+Hn(this.valueOf())+")":this.toString()}function b(t){return"object"==typeof this?$n(this.valueOf(),t.valueOf()):this===t}function E(t){return"object"==typeof this?Kn(this.valueOf(),t.valueOf()):!1===this||!0===t}function I(){return"object"==typeof this?"new Number("+Hn(this.valueOf())+")":1/this==-1/0?"-0":this.toString(10)}function N(t){return"object"==typeof this?$n(this.valueOf(),t.valueOf()):isNaN(this)&&isNaN(t)||this===t}function T(t){return"object"==typeof this?Kn(this.valueOf(),t.valueOf()):isNaN(this)||this<=t}function S(){var t=isNaN(this.valueOf())?NaN:this.toISOString();return"new Date("+Hn(t)+")"}function A(t){return $n(this.valueOf(),t.valueOf())}function C(t){return Kn(this.valueOf(),t.valueOf())}function O(t){return t.source===this.source&&t.global===this.global&&t.ignoreCase===this.ignoreCase&&t.multiline===this.multiline&&t.sticky===this.sticky&&t.unicode===this.unicode}function k(){return""}function V(){return"object"==typeof this?"new String("+Hn(this.valueOf())+")":JSON.stringify(this)}function R(t){return"object"==typeof this?$n(this.valueOf(),t.valueOf()):this===t}function q(t){return"object"==typeof this?Kn(this.valueOf(),t.valueOf()):this<=t}function j(t){return this+t}function z(){return[]}function D(t){return[t]}function P(t,n){for(var e=[n],r=[];e.length>0;){for(var i=t(a,c,e.shift()),o=[],s=0;s<i.length;s+=1)(i[s].done?r:o).push(i[s].value);Array.prototype.unshift.apply(e,o)}return r}function L(){return[]}function U(){for(var t=this.map(Hn),n=Object.keys(this).sort(),e=0;e<n.length;e+=1){var r=n[e];/^\d+$/.test(r)||t.push(Hn(r)+": "+Hn(this[r]))}return"["+t.join(", ")+"]"}function M(t){if(t.length!==this.length)return!1;for(var n=0;n<this.length;n+=1)if(!$n(this[n],t[n]))return!1;return!0}function F(t){for(var n=0;!0;n+=1){if(n===this.length)return!0;if(n===t.length)return!1;if(!$n(this[n],t[n]))return Kn(this[n],t[n])}}function Q(t){return this.concat(t)}function B(t){return this.filter(function(n){return t(n)})}function W(t){return this.map(function(n){return t(n)})}function H(t){for(var n=[],e=0;e<t.length;e+=1)for(var r=0;r<this.length;r+=1)n.push(t[e](this[r]));return n}function $(t){var n=[];return this.forEach(function(e){Array.prototype.push.apply(n,t(e))}),n}function K(t,n){return this.reduce(function(n,e){return t(n,e)},n)}function G(t,e){function r(o,u){switch(u){case 0:return $t(t,[]);case 2:return Qt(s,e(i[o]),e(i[o+1]));default:var a=2*Math.floor(u/4);return Qt(n,r(o,a),r(o+a,u-a))}}var i=this;return this.length%2==1?Qt(n,Pt(D,e(this[0])),r(1,this.length-1)):r(0,this.length)}function Y(t){return this.map(function(n,e,r){return t(r.slice(e))})}function J(){return"(function () { return arguments; }("+Array.prototype.map.call(this,Hn).join(", ")+"))"}function X(t){return M.call(this,t)}function Z(t){return F.call(this,t)}function tt(){return"new "+this.name+"("+Hn(this.message)+")"}function nt(t){return $n(this.name,t.name)&&$n(this.message,t.message)}function et(){return{}}function rt(){return{}}function it(){for(var t=[],n=Object.keys(this).sort(),e=0;e<n.length;e+=1){var r=n[e];t.push(Hn(r)+": "+Hn(this[r]))}return"{"+t.join(", ")+"}"}function ot(t){var n=this,e=Object.keys(this).sort();return $n(e,Object.keys(t).sort())&&e.every(function(e){return $n(n[e],t[e])})}function st(t){for(var n=Object.keys(this).sort(),e=Object.keys(t).sort();;){if(0===n.length)return!0;if(0===e.length)return!1;var r=n.shift(),i=e.shift();if(r<i)return!0;if(r>i)return!1;if(!$n(this[r],t[r]))return Kn(this[r],t[r])}}function ut(t){function n(t){e[t]=this[t]}var e={};return r(this,n),r(t,n),e}function at(t){var n={};return r(this,function(e){t(this[e])&&(n[e]=this[e])}),n}function ct(t){var n={};return r(this,function(e){n[e]=t(this[e])}),n}function ft(t){var n={};return r(this,function(e){i(e,t)&&(n[e]=t[e](this[e]))}),n}function lt(t,n){function e(n,e){return t(n,r[e])}var r=this;return Object.keys(this).sort().reduce(e,n)}function ht(t,n){var e=this;return Object.keys(this).reduce(function(t,r){function i(t){return function(n){var e={};return e[r]=n,ut.call(t,e)}}return Qt(i,t,n(e[r]))},$t(t,{}))}function pt(){return o}function dt(t){return function(n){return t}}function yt(t,n){return function(e){for(var r=a(n);!r.done;)r=t(a,c,r.value)(e);return r.value}}function vt(t){return t===this}function mt(t){var n=this;return function(e){return t(n(e))}}function _t(t){var n=this;return function(e){return t(n(e))}}function gt(t,n){var e=this;return function(r){return n(e(t(r)))}}function xt(t){var n=this;return function(e){return t(e)(n(e))}}function wt(t){var n=this;return function(e){return t(n(e))(e)}}function bt(t){var n=this;return function(e){return t(function(t){return n(kt(e,t))})}}function Et(t){var n=this;return function(e){return n(t(e))}}function It(t,n){return u(t,n)&&!Kn(n,t)}function Nt(t,n){return It(n,t)}function Tt(t,n){return Kn(n,t)}function St(t,n){return Kn(t,n)?t:n}function At(t,n){return Kn(t,n)?n:t}function Ct(t,n){return wn.methods.compose(n)(t)}function Ot(t){return bn.methods.id(t)()}function kt(t,n){return En.methods.concat(t)(n)}function Vt(t){return In.methods.empty(t)()}function Rt(t){return Nn.methods.invert(t)()}function qt(t,n){return Tn.methods.filter(n)(t)}function jt(t,n){return qt(function(n){return!t(n)},n)}function zt(t,n){var e=!0;return qt(function(n){return e=e&&t(n)},n)}function Dt(t,n){var e=!1;return qt(function(n){return e=e||!t(n)},n)}function Pt(t,n){return Sn.methods.map(n)(t)}function Lt(t,n,e){return An.methods.bimap(e)(t,n)}function Ut(t,n){return Lt(t,o,n)}function Mt(t,n,e){return Cn.methods.promap(e)(t,n)}function Ft(t,n){return On.methods.ap(n)(t)}function Qt(t,n,e){return Ft(Pt(t,n),e)}function Bt(t,n,e,r){return Ft(Ft(Pt(t,n),e),r)}function Wt(t,n){return Qt(e,t,n)}function Ht(t,n){return Qt(e(o),t,n)}function $t(t,n){return kn.methods.of(t)(n)}function Kt(t,n){return kt(n,$t(n.constructor,t))}function Gt(t,n){return kt($t(n.constructor,t),n)}function Yt(t,n){return Vn.methods.chain(n)(t)}function Jt(t){return Yt(o,t)}function Xt(t,n,e){return Rn.methods.chainRec(t)(n,e)}function Zt(t,n){return jn.methods.alt(t)(n)}function tn(t){return zn.methods.zero(t)()}function nn(t,n,e){return Pn.methods.reduce(e)(t,n)}function en(t){return Array.isArray(t)?t.length:nn(function(t,n){return t+1},0,t)}function rn(t,n){return nn(function(n,e){return n||$n(t,e)},!1,n)}function on(t){if(Array.isArray(t))return t.slice().reverse();var n=t.constructor;return nn(function(t,e){return kt($t(n,e),t)},Vt(n),t)}function sn(t){return un(o,t)}function un(t,n){for(var e=nn(function(n,e){for(var r=t(e),i=0,o=n.length;i<o;){var s=Math.floor((i+o)/2);Kn(n[s].fx,r)?i=s+1:o=s}return n.splice(i,0,{x:e,fx:r}),n},[],n),r=n.constructor,i=Vt(r),o=0;o<e.length;o+=1)i=kt(i,$t(r,e[o].x));return i}function an(t,n,e){return Ln.methods.traverse(e)(t,n)}function cn(t,n){return an(t,o,n)}function fn(t,n){return Un.methods.extend(n)(t)}function ln(t){return fn(o,t)}function hn(t){return Mn.methods.extract(t)()}function pn(t,n){return Fn.methods.contramap(n)(t)}if("undefined"!=typeof __doctest){var dn=(__doctest.require("./test/Identity"),__doctest.require("./test/List")),yn=__doctest.require("./test/Maybe");__doctest.require("./test/Sum"),__doctest.require("./test/Tuple"),dn.Nil,dn.Cons,yn.Nothing,yn.Just}f["@@type"]="sanctuary-type-classes/TypeClass";var vn="Constructor",mn="Value",_n=i("name",function(){})?function(t){return t.name}:function(t){var n=/function (\w*)/.exec(t);return null==n?"":n[1]},gn=d("Setoid",[],{equals:mn}),xn=d("Ord",[gn],{lte:mn}),wn=d("Semigroupoid",[],{compose:mn}),bn=d("Category",[wn],{id:vn}),En=d("Semigroup",[],{concat:mn}),In=d("Monoid",[En],{empty:vn}),Nn=d("Group",[In],{invert:mn}),Tn=d("Filterable",[],{filter:mn}),Sn=d("Functor",[],{map:mn}),An=d("Bifunctor",[Sn],{bimap:mn}),Cn=d("Profunctor",[Sn],{promap:mn}),On=d("Apply",[Sn],{ap:mn}),kn=d("Applicative",[On],{of:vn}),Vn=d("Chain",[On],{chain:mn}),Rn=d("ChainRec",[Vn],{chainRec:vn}),qn=d("Monad",[kn,Vn],{}),jn=d("Alt",[Sn],{alt:mn}),zn=d("Plus",[jn],{zero:vn}),Dn=d("Alternative",[kn,zn],{}),Pn=d("Foldable",[],{reduce:mn}),Ln=d("Traversable",[Sn,Pn],{traverse:mn}),Un=d("Extend",[Sn],{extend:mn}),Mn=d("Comonad",[Un],{extract:mn}),Fn=d("Contravariant",[],{contramap:mn}),Qn=Q,Bn=ut,Wn={Null:{prototype:{toString:y,"fantasy-land/equals":v,"fantasy-land/lte":m}},Undefined:{prototype:{toString:_,"fantasy-land/equals":g,"fantasy-land/lte":x}},Boolean:{prototype:{toString:w,"fantasy-land/equals":b,"fantasy-land/lte":E}},Number:{prototype:{toString:I,"fantasy-land/equals":N,"fantasy-land/lte":T}},Date:{prototype:{toString:S,"fantasy-land/equals":A,"fantasy-land/lte":C}},RegExp:{prototype:{"fantasy-land/equals":O}},String:{"fantasy-land/empty":k,prototype:{toString:V,"fantasy-land/equals":R,"fantasy-land/lte":q,"fantasy-land/concat":j}},Array:{"fantasy-land/empty":z,"fantasy-land/of":D,"fantasy-land/chainRec":P,"fantasy-land/zero":L,prototype:{toString:U,"fantasy-land/equals":M,"fantasy-land/lte":F,"fantasy-land/concat":Q,"fantasy-land/filter":B,"fantasy-land/map":W,"fantasy-land/ap":H,"fantasy-land/chain":$,"fantasy-land/alt":Qn,"fantasy-land/reduce":K,"fantasy-land/traverse":G,"fantasy-land/extend":Y}},Arguments:{prototype:{toString:J,"fantasy-land/equals":X,"fantasy-land/lte":Z}},Error:{prototype:{toString:tt,"fantasy-land/equals":nt}},Object:{"fantasy-land/empty":et,"fantasy-land/zero":rt,prototype:{toString:it,"fantasy-land/equals":ot,"fantasy-land/lte":st,"fantasy-land/concat":ut,"fantasy-land/filter":at,"fantasy-land/map":ct,"fantasy-land/ap":ft,"fantasy-land/alt":Bn,"fantasy-land/reduce":lt,"fantasy-land/traverse":ht}},Function:{"fantasy-land/id":pt,"fantasy-land/of":dt,"fantasy-land/chainRec":yt,prototype:{"fantasy-land/equals":vt,"fantasy-land/compose":mt,"fantasy-land/map":_t,"fantasy-land/promap":gt,"fantasy-land/ap":xt,"fantasy-land/chain":wt,"fantasy-land/extend":bt,"fantasy-land/contramap":Et}}},Hn=function(){function n(t,n){e.push(n);try{return t.call(n)}finally{e.pop()}}var e=[];return function(r){if(e.indexOf(r)>=0)return"<Circular>";var i=t(r);if("Object"===i){var o;try{o=n(r.toString,r)}catch(t){}if(null!=o&&"[object Object]"!==o)return o}return n(p([i,"prototype","toString"])||r.toString,r)}}(),$n=function(){var t=[];return function(n,e){if(!u(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return!0;t.push([n,e]);try{return gn.test(n)&&gn.test(e)&&gn.methods.equals(n)(e)}finally{t.pop()}}}(),Kn=function(){var t=[];return function(n,e){if(!u(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return $n(n,e);t.push([n,e]);try{return xn.test(n)&&xn.test(e)&&xn.methods.lte(n)(e)}finally{t.pop()}}}();return{TypeClass:f,Setoid:gn,Ord:xn,Semigroupoid:wn,Category:bn,Semigroup:En,Monoid:In,Group:Nn,Filterable:Tn,Functor:Sn,Bifunctor:An,Profunctor:Cn,Apply:On,Applicative:kn,Chain:Vn,ChainRec:Rn,Monad:qn,Alt:jn,Plus:zn,Alternative:Dn,Foldable:Pn,Traversable:Ln,Extend:Un,Comonad:Mn,Contravariant:Fn,toString:Hn,equals:$n,lt:It,lte:Kn,gt:Nt,gte:Tt,min:St,max:At,compose:Ct,id:Ot,concat:kt,empty:Vt,invert:Rt,filter:qt,reject:jt,map:Pt,bimap:Lt,mapLeft:Ut,promap:Mt,ap:Ft,lift2:Qt,lift3:Bt,apFirst:Wt,apSecond:Ht,of:$t,append:Kt,prepend:Gt,chain:Yt,join:Jt,chainRec:Xt,alt:Zt,zero:tn,reduce:nn,size:en,elem:rn,reverse:on,sort:sn,sortBy:un,takeWhile:zt,dropWhile:Dt,traverse:an,sequence:cn,extend:fn,duplicate:ln,extract:hn,contramap:pn}})},function(t,n,e){"use strict";var r=function(){function t(t){var n=t.x,e=void 0===n?0:n,r=t.y,i=void 0===r?0:r,o=t.radius,s=void 0===o?15:o,u=t.border,a=void 0===u?1:u,c=t.color,f=void 0===c?"#ff0000":c;this.x=e,this.y=i,this.radius=s,this.rotation=0,this.scaleX=1,this.scaleY=1,this.color=f,this.lineWidth=a}return t.prototype.translate=function(t,n){return this.x=t,this.y=n,this},t.prototype.scale=function(t,n){return this.scaleX=t,this.scaleY=n,this},t.prototype.draw=function(t){t.save(),t.translate(this.x,this.y),t.rotate(this.rotation),t.scale(this.scaleX,this.scaleY),t.lineWidth=this.lineWidth,t.fillStyle=this.color,t.beginPath(),t.arc(0,0,this.radius,0,2*Math.PI,!0),t.closePath(),t.fill(),this.lineWidth>0&&t.stroke(),t.restore()},t}();n.a=r},function(t,n,e){"use strict";var r=e(3),i=function(){function t(t,n,e,r){this.t0=t,this.a=n,this.b=e,this.c=r}return t.prototype.valueAt=function(t){var n=t-this.t0;return this.a*n*n+this.b*n+this.c},t.prototype.when=function(n){var e,r=this.c-n;if(0===this.a){var i=-r/this.b;e=i>=t.quantum?i+this.t0:null}else{var o=Math.sqrt(this.b*this.b-4*this.a*r),s=(-this.b+o)/(2*this.a),u=(-this.b-o)/(2*this.a);e=s>=t.quantum?u>=t.quantum?(s<u?s:u)+this.t0:s+this.t0:u>=t.quantum?u+this.t0:null}return e},t.prototype.integrate=function(n){if(0!==this.a)throw new Error("Signal can't handle x^3");return new t(this.t0,this.b/2,this.c,n)},t.integrate=function(t,n){return r.c.updates(t).accum(t.sample().integrate(n),function(t,n){return t.integrate(n.valueAt(t.t0))})},t.quantum=1e-6,t}();n.a=i},function(t,n){!function(n){var e="Modernizr"in n,r=n.Modernizr;/*! modernizr 3.5.0 (Custom Build) | MIT *
 * https://modernizr.com/download/?-canvas !*/
!function(t,n,e){function r(t,n){return typeof t===n}function i(){return"function"!=typeof n.createElement?n.createElement(arguments[0]):f?n.createElementNS.call(n,"http://www.w3.org/2000/svg",arguments[0]):n.createElement.apply(n,arguments)}var o=[],s={_version:"3.5.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(t,n){var e=this;setTimeout(function(){n(e[t])},0)},addTest:function(t,n,e){o.push({name:t,fn:n,options:e})},addAsyncTest:function(t){o.push({name:null,fn:t})}},u=function(){};u.prototype=s,u=new u;var a=[],c=n.documentElement,f="svg"===c.nodeName.toLowerCase();u.addTest("canvas",function(){var t=i("canvas");return!(!t.getContext||!t.getContext("2d"))}),function(){var t,n,e,i,s,c,f;for(var l in o)if(o.hasOwnProperty(l)){if(t=[],n=o[l],n.name&&(t.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(e=0;e<n.options.aliases.length;e++)t.push(n.options.aliases[e].toLowerCase());for(i=r(n.fn,"function")?n.fn():n.fn,s=0;s<t.length;s++)c=t[s],f=c.split("."),1===f.length?u[f[0]]=i:(!u[f[0]]||u[f[0]]instanceof Boolean||(u[f[0]]=new Boolean(u[f[0]])),u[f[0]][f[1]]=i),a.push((i?"":"no-")+f.join("-"))}}(),delete s.addTest,delete s.addAsyncTest;for(var l=0;l<u._q.length;l++)u._q[l]();t.Modernizr=u}(n,document),t.exports=n.Modernizr,e?n.Modernizr=r:delete n.Modernizr}(window)}]);